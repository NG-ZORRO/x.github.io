import{a as g}from"./chunk-KLHNJ3M2.js";import{Ba as u,Xc as a}from"./chunk-WMX4TNQB.js";import{a as o,b as r}from"./chunk-OW75ZOQB.js";var c=0,p=class{config;requestingMap=u({});isRequesting=a(()=>Object.keys(this.requestingMap()).length>0);constructor(t){this.config=t}finishRequest(t){this.requestingMap.update(n=>{let i=o({},n);return delete i[t],i})}request=(t,n,i)=>{let{request:h=g({baseURL:this.config.baseURL,model:this.config.model,dangerouslyApiKey:this.config.dangerouslyApiKey}).create}=this.config,{onUpdate:q,onSuccess:d,onError:f,onStream:M}=n,s=c;c+=1,this.requestingMap.update(e=>r(o({},e),{[s]:!0})),h?.(t,{onStream:e=>{this.requestingMap()[s]&&M?.(e)},onUpdate:e=>{this.requestingMap()[s]&&q(e)},onSuccess:e=>{this.requestingMap()[s]&&(d(e),this.finishRequest(s))},onError:e=>{this.requestingMap()[s]&&(f(e),this.finishRequest(s))}},i)}};export{p as a};
