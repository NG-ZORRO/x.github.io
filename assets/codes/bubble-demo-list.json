{"highlightCode":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> signal <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FormsModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NzAvatarModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'ng-zorro-antd/avatar'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NzButtonModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'ng-zorro-antd/button'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NzFlexModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'ng-zorro-antd/flex'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NzSwitchModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'ng-zorro-antd/switch'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NxBubbleListItem<span class=\"token punctuation\">,</span> NxBubbleModule<span class=\"token punctuation\">,</span> NxBubbleRole <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'ng-zorro-x/bubble'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Role</span> <span class=\"token operator\">=</span> <span class=\"token string\">'user'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'ai'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Component</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">'nx-demo-bubble-list'</span><span class=\"token punctuation\">,</span>\n  imports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>FormsModule<span class=\"token punctuation\">,</span> NxBubbleModule<span class=\"token punctuation\">,</span> NzAvatarModule<span class=\"token punctuation\">,</span> NzButtonModule<span class=\"token punctuation\">,</span> NzFlexModule<span class=\"token punctuation\">,</span> NzSwitchModule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token template-string\">template: <span class=\"token html\">`\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nz-flex</span> <span class=\"token attr-name\">nzJustify</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>space-between<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nz-flex</span> <span class=\"token attr-name\">nzGap</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>middle<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>Use Role As:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nz-switch</span>\n          <span class=\"token attr-name\">nzCheckedChildren</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Function<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">nzUnCheckedChildren</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Object<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">[(ngModel)]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>useRoleAsFunction<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nz-switch</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nz-flex</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nz-flex</span> <span class=\"token attr-name\">nzGap</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>middle<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>add()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Add Bubble<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>list.scrollTo({ key: 0, block: 'nearest' })<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Scroll To First<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nz-flex</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nz-flex</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nx-bubble-list</span>\n      <span class=\"token attr-name\">#list</span>\n      <span class=\"token attr-name\">[nxItems]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>items()<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">[nxRoles]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>useRoleAsFunction ? roleAsFunction : roleAsObject<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nx-bubble-list</span><span class=\"token punctuation\">></span></span>\n  `</span></span><span class=\"token punctuation\">,</span>\n  styles<span class=\"token operator\">:</span> `\n    nx<span class=\"token operator\">-</span>bubble<span class=\"token operator\">-</span>list <span class=\"token punctuation\">{</span>\n      margin<span class=\"token operator\">-</span>top<span class=\"token operator\">:</span> 16px<span class=\"token punctuation\">;</span>\n      max<span class=\"token operator\">-</span>height<span class=\"token operator\">:</span> 300px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">:</span><span class=\"token operator\">:</span>ng<span class=\"token operator\">-</span>deep <span class=\"token punctuation\">.</span>ant<span class=\"token operator\">-</span>bubble<span class=\"token operator\">-</span>content <span class=\"token punctuation\">{</span>\n      max<span class=\"token operator\">-</span>width<span class=\"token operator\">:</span> 600px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  `\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NxDemoBubbleListComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> getMockContent <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>isAI<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>isAI <span class=\"token operator\">?</span> <span class=\"token string\">'Mock AI content. '</span><span class=\"token punctuation\">.</span><span class=\"token function\">repeat</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Mock user content.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  items <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">signal</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>NxBubbleListItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      key<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      role<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span>\n      content<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMockContent</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      key<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      role<span class=\"token operator\">:</span> <span class=\"token string\">'ai'</span><span class=\"token punctuation\">,</span>\n      content<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMockContent</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  useRoleAsFunction <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">readonly</span> roleAsFunction <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> NxBubbleListItem<span class=\"token punctuation\">,</span> _index<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NxBubbleRole <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>role<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'ai'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          placement<span class=\"token operator\">:</span> <span class=\"token string\">'start'</span><span class=\"token punctuation\">,</span>\n          typing<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> interval<span class=\"token operator\">:</span> <span class=\"token number\">2000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          avatar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            icon<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span>\n            style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> background<span class=\"token operator\">:</span> <span class=\"token string\">'#fde3cf'</span> <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'user'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          placement<span class=\"token operator\">:</span> <span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span>\n          avatar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            icon<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span>\n            style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> background<span class=\"token operator\">:</span> <span class=\"token string\">'#87d068'</span> <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">readonly</span> roleAsObject<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span>Role<span class=\"token punctuation\">,</span> NxBubbleRole<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    ai<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      placement<span class=\"token operator\">:</span> <span class=\"token string\">'start'</span><span class=\"token punctuation\">,</span>\n      typing<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> step<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> interval<span class=\"token operator\">:</span> <span class=\"token number\">20</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      avatar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        icon<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span>\n        style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> background<span class=\"token operator\">:</span> <span class=\"token string\">'#fde3cf'</span> <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    user<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      placement<span class=\"token operator\">:</span> <span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span>\n      avatar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        icon<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span>\n        style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> background<span class=\"token operator\">:</span> <span class=\"token string\">'#87d068'</span> <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>items <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> i <span class=\"token operator\">=</span> items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> isAI <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">%</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> items<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        key<span class=\"token operator\">:</span> i<span class=\"token punctuation\">,</span>\n        role<span class=\"token operator\">:</span> isAI <span class=\"token operator\">?</span> <span class=\"token string\">'ai'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span>\n        content<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMockContent</span><span class=\"token punctuation\">(</span>isAI<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n","rawCode":"import { Component, signal } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { NzAvatarModule } from 'ng-zorro-antd/avatar';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzFlexModule } from 'ng-zorro-antd/flex';\nimport { NzSwitchModule } from 'ng-zorro-antd/switch';\n\nimport { NxBubbleListItem, NxBubbleModule, NxBubbleRole } from 'ng-zorro-x/bubble';\n\ntype Role = 'user' | 'ai';\n\n@Component({\n  selector: 'nx-demo-bubble-list',\n  imports: [FormsModule, NxBubbleModule, NzAvatarModule, NzButtonModule, NzFlexModule, NzSwitchModule],\n  template: `\n    <nz-flex nzJustify=\"space-between\">\n      <nz-flex nzGap=\"middle\">\n        <label>Use Role As:</label>\n        <nz-switch\n          nzCheckedChildren=\"Function\"\n          nzUnCheckedChildren=\"Object\"\n          [(ngModel)]=\"useRoleAsFunction\"\n        ></nz-switch>\n      </nz-flex>\n      <nz-flex nzGap=\"middle\">\n        <button nz-button (click)=\"add()\">Add Bubble</button>\n        <button nz-button (click)=\"list.scrollTo({ key: 0, block: 'nearest' })\">Scroll To First</button>\n      </nz-flex>\n    </nz-flex>\n    <nx-bubble-list\n      #list\n      [nxItems]=\"items()\"\n      [nxRoles]=\"useRoleAsFunction ? roleAsFunction : roleAsObject\"\n    ></nx-bubble-list>\n  `,\n  styles: `\n    nx-bubble-list {\n      margin-top: 16px;\n      max-height: 300px;\n    }\n    ::ng-deep .ant-bubble-content {\n      max-width: 600px;\n    }\n  `\n})\nexport class NxDemoBubbleListComponent {\n  readonly getMockContent = (isAI: boolean): string => (isAI ? 'Mock AI content. '.repeat(20) : 'Mock user content.');\n\n  items = signal<NxBubbleListItem[]>([\n    {\n      key: 0,\n      role: 'user',\n      content: this.getMockContent(false)\n    },\n    {\n      key: 1,\n      role: 'ai',\n      content: this.getMockContent(true)\n    }\n  ]);\n  useRoleAsFunction = false;\n  readonly roleAsFunction = (item: NxBubbleListItem, _index: number): NxBubbleRole => {\n    switch (item.role) {\n      case 'ai':\n        return {\n          placement: 'start',\n          typing: { step: 5, interval: 2000 },\n          avatar: {\n            icon: 'user',\n            style: { background: '#fde3cf' }\n          }\n        };\n      case 'user':\n        return {\n          placement: 'end',\n          avatar: {\n            icon: 'user',\n            style: { background: '#87d068' }\n          }\n        };\n      default:\n        return {};\n    }\n  };\n\n  readonly roleAsObject: Record<Role, NxBubbleRole> = {\n    ai: {\n      placement: 'start',\n      typing: { step: 5, interval: 20 },\n      avatar: {\n        icon: 'user',\n        style: { background: '#fde3cf' }\n      }\n    },\n    user: {\n      placement: 'end',\n      avatar: {\n        icon: 'user',\n        style: { background: '#87d068' }\n      }\n    }\n  };\n\n  add(): void {\n    this.items.update(items => {\n      const i = items.length;\n      const isAI = !!(i % 2);\n      return items.concat({\n        key: i,\n        role: isAI ? 'ai' : 'user',\n        content: this.getMockContent(isAI)\n      });\n    });\n  }\n}\n"}
